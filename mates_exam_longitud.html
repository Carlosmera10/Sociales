<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Examen: La Longitud</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap');

        :root {
            --primary-color: #007bff;
            --secondary-color: #6c757d;
            --background-color: #f4f7f9;
            --container-bg: #ffffff;
            --text-color: #333;
            --correct-color: #28a745;
            --incorrect-color: #dc3545;
            --light-correct: #d4edda;
            --light-incorrect: #f8d7da;
            --border-color: #dee2e6;
            --shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            margin: 0;
            padding: 0; /* Eliminamos el padding del body */
            display: flex;
            flex-direction: column; /* Apilamos los elementos verticalmente */
            min-height: 100vh; /* Aseguramos que el body ocupe toda la altura */
        }
        
        /* Nuevo contenedor principal para centrar el examen */
        main {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-grow: 1; /* Hace que el main ocupe el espacio disponible, empujando el footer hacia abajo */
            padding: 20px;
        }

        .container {
            background: var(--container-bg);
            border-radius: 15px;
            box-shadow: var(--shadow);
            width: 100%;
            max-width: 900px;
            overflow: hidden;
        }

        .header {
            background-color: var(--primary-color);
            color: white;
            padding: 25px 30px;
            text-align: center;
        }

        .header h1 {
            margin: 0;
            font-size: 2em;
        }
        
        .header p {
            margin: 5px 0 0;
            font-size: 1.1em;
            opacity: 0.9;
        }

        .content {
            padding: 30px;
        }

        .question {
            background-color: #fdfdfd;
            border: 1px solid var(--border-color);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 25px;
            transition: box-shadow 0.3s ease;
        }

        .question:hover {
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        }

        .question-text {
            font-weight: 600;
            font-size: 1.2em;
            margin-bottom: 15px;
        }

        .question-text strong {
            color: var(--primary-color);
        }

        /* Opciones de Test */
        .options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .option {
            background-color: #f8f9fa;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            padding: 12px 15px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .option:hover {
            border-color: var(--primary-color);
            background-color: #e9ecef;
        }

        .option.selected {
            background-color: #cfe2ff;
            border-color: var(--primary-color);
            font-weight: 600;
        }

        .option.correct {
            background-color: var(--light-correct);
            border-color: var(--correct-color);
        }

        .option.incorrect {
            background-color: var(--light-incorrect);
            border-color: var(--incorrect-color);
        }

        /* Arrastrar y Soltar */
        .word-bank {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            padding: 15px;
            background-color: #e9ecef;
            border-radius: 8px;
            margin-bottom: 20px;
            justify-content: center;
        }

        .word, .match-item {
            padding: 8px 15px;
            background-color: var(--container-bg);
            border: 1px solid var(--border-color);
            border-radius: 20px;
            cursor: grab;
            user-select: none;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            transition: background-color 0.2s;
        }

        .word:active, .match-item:active {
            cursor: grabbing;
            background-color: #cfe2ff;
        }

        .drop-zone {
            border: 2px dashed var(--border-color);
            border-radius: 8px;
            min-height: 50px;
            padding: 10px;
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            align-items: center;
            transition: background-color 0.3s;
        }

        .drop-zone.over {
            background-color: #cfe2ff;
        }

        .drop-zone .word {
            cursor: default;
        }

        .drop-zone.correct { background-color: var(--light-correct); border-color: var(--correct-color); }
        .drop-zone.incorrect { background-color: var(--light-incorrect); border-color: var(--incorrect-color); }

        /* Clasificaci√≥n */
        .category-container {
            display: flex;
            justify-content: space-around;
            gap: 20px;
            margin-top: 20px;
        }

        .category-box {
            width: 48%;
            border: 1px solid var(--border-color);
            border-radius: 10px;
            padding: 15px;
        }
        .category-box h4 {
            text-align: center;
            margin-top: 0;
            color: var(--primary-color);
        }

        /* Emparejar */
        .matching-container {
            display: flex;
            justify-content: space-between;
            gap: 20px;
        }
        .column {
            width: 48%;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .match-item {
            cursor: pointer;
            text-align: center;
        }
        .match-item.selected {
            background-color: #cfe2ff;
            border: 1px solid var(--primary-color);
        }
        .match-item.paired {
            background-color: #e9ecef;
            cursor: default;
            opacity: 0.6;
        }
        .match-item.correct { background-color: var(--light-correct); opacity: 1;}
        .match-item.incorrect { background-color: var(--light-incorrect); opacity: 1;}

        /* Cloze */
        .cloze-text {
            line-height: 2;
            font-size: 1.1em;
        }
        .drop-zone-inline {
            display: inline-block;
            border: 2px dashed var(--border-color);
            border-radius: 6px;
            padding: 2px 10px;
            min-width: 100px;
            text-align: center;
            vertical-align: middle;
        }
        .drop-zone-inline.over { background-color: #cfe2ff; }
        .drop-zone-inline.correct { background-color: var(--light-correct); border-color: var(--correct-color); }
        .drop-zone-inline.incorrect { background-color: var(--light-incorrect); border-color: var(--incorrect-color); }
        .drop-zone-inline .word {
            display: inline-block;
        }

        /* Input num√©rico */
        .numeric-input {
            padding: 10px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 1.1em;
            width: 100px;
            text-align: center;
        }
        .numeric-input.correct { background-color: var(--light-correct); border-color: var(--correct-color); }
        .numeric-input.incorrect { background-color: var(--light-incorrect); border-color: var(--incorrect-color); }


        /* Bot√≥n y Resultados */
        .submit-btn {
            display: block;
            width: 100%;
            padding: 15px;
            font-size: 1.3em;
            font-weight: 700;
            color: white;
            background: linear-gradient(45deg, var(--correct-color), #20c997);
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            margin-top: 20px;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(40, 167, 69, 0.4);
        }
        
        .submit-btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .results {
            margin-top: 30px;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            display: none; /* Oculto por defecto */
        }

        .results.show {
            display: block;
        }

        .results-title {
            font-size: 1.8em;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .score {
            font-size: 1.4em;
            margin-bottom: 15px;
        }

        .feedback-message {
            font-size: 1.2em;
            font-weight: 600;
        }

        .main-footer {
            text-align: center;
            padding: 20px;
            background-color: transparent; /* Hacemos el fondo transparente */
            width: 100%;
        }

        .main-footer a {
            color: var(--primary-color);
            text-decoration: none;
            font-weight: 600;
            padding: 10px 20px;
            border-radius: 8px;
            transition: background-color 0.3s;
        }
        .main-footer a:hover {
            background-color: #e0e0e0;
        }
    </style>
</head>
<body>

    <!-- El contenedor <main> ahora centra el examen en la p√°gina -->
    <main>
        <div class="container">
            <div class="header">
                <h1>üìù Examen: La Longitud</h1>
                <p>¬°Demuestra lo que has aprendido sobre las unidades de medida!</p>
            </div>

            <div class="content">
                <form id="quiz-form">
                
                    <!-- PREGUNTAS DE TEST (UNA RESPUESTA) -->
                    <div class="question" data-question-id="1">
                        <div class="question-text">1. ¬øCu√°l de estas unidades es un <strong>subm√∫ltiplo</strong> del metro?</div>
                        <div class="options" data-correct="üìè Cent√≠metro (cm)">
                            <div class="option">üìè Kil√≥metro (km)</div>
                            <div class="option">üìè Hect√≥metro (hm)</div>
                            <div class="option">üìè Cent√≠metro (cm)</div>
                            <div class="option">üìè Dec√°metro (dam)</div>
                        </div>
                    </div>

                    <div class="question" data-question-id="2">
                        <div class="question-text">2. Para pasar de una unidad <strong>m√°s grande</strong> a otra <strong>m√°s peque√±a</strong> (bajar la escalera), ¬øqu√© operaci√≥n hacemos?</div>
                        <div class="options" data-correct="‚úñÔ∏è Multiplicar">
                            <div class="option">‚ûï Sumar</div>
                            <div class="option">‚ûñ Restar</div>
                            <div class="option">‚úñÔ∏è Multiplicar</div>
                            <div class="option">‚ûó Dividir</div>
                        </div>
                    </div>

                    <div class="question" data-question-id="3">
                        <div class="question-text">3. ¬øCu√°ntos <strong>metros</strong> hay en 1 kil√≥metro?</div>
                        <div class="options" data-correct="üõ£Ô∏è 1.000 metros">
                            <div class="option">üõ£Ô∏è 10 metros</div>
                            <div class="option">üõ£Ô∏è 100 metros</div>
                            <div class="option">üõ£Ô∏è 1.000 metros</div>
                            <div class="option">üõ£Ô∏è 10.000 metros</div>
                        </div>
                    </div>
                    
                    <div class="question" data-question-id="4">
                        <div class="question-text">4. La expresi√≥n "5 km y 300 m" es una forma...</div>
                        <div class="options" data-correct="üß© Compleja">
                            <div class="option">üß© Compleja</div>
                            <div class="option">üß© Simple</div>
                            <div class="option">üß© Incorrecta</div>
                            <div class="option">üß© M√∫ltiple</div>
                        </div>
                    </div>

                    <div class="question" data-question-id="5">
                        <div class="question-text">5. ¬øCu√°l es la unidad principal de longitud?</div>
                        <div class="options" data-correct="üëë El metro (m)">
                            <div class="option">üëë El gramo (g)</div>
                            <div class="option">üëë El litro (l)</div>
                            <div class="option">üëë El metro (m)</div>
                            <div class="option">üëë El segundo (s)</div>
                        </div>
                    </div>

                    <!-- PREGUNTAS DE VERDADERO O FALSO -->
                    <div class="question" data-question-id="6">
                        <div class="question-text">6. <strong>Verdadero o Falso:</strong> Para subir la escalera m√©trica (pasar de una unidad peque√±a a una grande) multiplicamos.</div>
                        <div class="options" data-correct="üëé Falso">
                            <div class="option">üëç Verdadero</div>
                            <div class="option">üëé Falso</div>
                        </div>
                    </div>

                    <div class="question" data-question-id="7">
                        <div class="question-text">7. <strong>Verdadero o Falso:</strong> Un mil√≠metro es m√°s peque√±o que un cent√≠metro.</div>
                        <div class="options" data-correct="üëç Verdadero">
                            <div class="option">üëç Verdadero</div>
                            <div class="option">üëé Falso</div>
                        </div>
                    </div>

                    <div class="question" data-question-id="8">
                        <div class="question-text">8. <strong>Verdadero o Falso:</strong> Para comparar dos longitudes, primero debemos pasarlas a la misma unidad.</div>
                        <div class="options" data-correct="üëç Verdadero">
                            <div class="option">üëç Verdadero</div>
                            <div class="option">üëé Falso</div>
                        </div>
                    </div>
                    
                    <div class="question" data-question-id="9">
                        <div class="question-text">9. <strong>Verdadero o Falso:</strong> La distancia entre Madrid y Barcelona se mide en cent√≠metros.</div>
                        <div class="options" data-correct="üëé Falso">
                            <div class="option">üëç Verdadero</div>
                            <div class="option">üëé Falso</div>
                        </div>
                    </div>

                    <div class="question" data-question-id="10">
                        <div class="question-text">10. <strong>Verdadero o Falso:</strong> 2500 metros es lo mismo que 2 km y 500 m.</div>
                        <div class="options" data-correct="üëç Verdadero">
                            <div class="option">üëç Verdadero</div>
                            <div class="option">üëé Falso</div>
                        </div>
                    </div>

                    <!-- PREGUNTA DE EMPAREJAR -->
                    <div class="question matching-question" data-question-id="11">
                        <div class="question-text">11. Empareja cada unidad con su equivalencia correcta. (5 Puntos)</div>
                        <div class="matching-container">
                            <div class="column" id="column-a-11">
                                <div class="match-item" data-match-id="1">üìç 1 km</div>
                                <div class="match-item" data-match-id="2">üìç 1 m</div>
                                <div class="match-item" data-match-id="3">üìç 1 dam</div>
                                <div class="match-item" data-match-id="4">üìç 1 hm</div>
                                <div class="match-item" data-match-id="5">üìç 1 cm</div>
                            </div>
                            <div class="column" id="column-b-11">
                                <div class="match-item" data-match-id="4">‚û°Ô∏è 100 m</div>
                                <div class="match-item" data-match-id="1">‚û°Ô∏è 1.000 m</div>
                                <div class="match-item" data-match-id="5">‚û°Ô∏è 10 mm</div>
                                <div class="match-item" data-match-id="2">‚û°Ô∏è 100 cm</div>
                                <div class="match-item" data-match-id="3">‚û°Ô∏è 10 m</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- PREGUNTA DE CLASIFICAR -->
                    <div class="question" data-question-id="12">
                        <div class="question-text">12. Arrastra cada unidad a su categor√≠a correcta: <strong>M√∫ltiplos</strong> (m√°s grandes que el metro) o <strong>Subm√∫ltiplos</strong> (m√°s peque√±os que el metro). (6 Puntos)</div>
                        <div class="word-bank">
                            <div class="word" draggable="true" data-type="multiplos">Kil√≥metro</div>
                            <div class="word" draggable="true" data-type="submultiplos">Cent√≠metro</div>
                            <div class="word" draggable="true" data-type="multiplos">Hect√≥metro</div>
                            <div class="word" draggable="true" data-type="submultiplos">Mil√≠metro</div>
                            <div class="word" draggable="true" data-type="multiplos">Dec√°metro</div>
                            <div class="word" draggable="true" data-type="submultiplos">Dec√≠metro</div>
                        </div>
                        <div class="category-container">
                            <div class="category-box">
                                <h4>üîº M√öLTIPLOS</h4>
                                <div class="drop-zone" data-accept="multiplos"></div>
                            </div>
                            <div class="category-box">
                                <h4>üîΩ SUBM√öLTIPLOS</h4>
                                <div class="drop-zone" data-accept="submultiplos"></div>
                            </div>
                        </div>
                    </div>

                    <!-- PREGUNTAS DE RESPUESTA NUM√âRICA -->
                    <div class="question" data-question-id="13">
                        <div class="question-text">13. Convierte a metros: 7 km = ? m</div>
                        <input type="number" class="numeric-input" data-answer="7000"> m
                    </div>

                    <div class="question" data-question-id="14">
                        <div class="question-text">14. Convierte a metros: 300 cm = ? m</div>
                        <input type="number" class="numeric-input" data-answer="3"> m
                    </div>

                    <div class="question" data-question-id="15">
                        <div class="question-text">15. Convierte a metros: 5 dam = ? m</div>
                        <input type="number" class="numeric-input" data-answer="50"> m
                    </div>

                    <div class="question" data-question-id="16">
                        <div class="question-text">16. Convierte a mil√≠metros: 2 m = ? mm</div>
                        <input type="number" class="numeric-input" data-answer="2000"> mm
                    </div>

                    <div class="question" data-question-id="17">
                        <div class="question-text">17. Calcula la suma en metros: 1 km + 500 m = ? m</div>
                        <input type="number" class="numeric-input" data-answer="1500"> m
                    </div>

                    <div class="question" data-question-id="18">
                        <div class="question-text">18. Calcula la resta en cent√≠metros: 2 m - 50 cm = ? cm</div>
                        <input type="number" class="numeric-input" data-answer="150"> cm
                    </div>

                    <div class="question" data-question-id="19">
                        <div class="question-text">19. Un atleta corre 9 km y 500 m. Si ya ha recorrido 600 dam, ¬øcu√°ntos <strong>metros</strong> le faltan?</div>
                        <input type="number" class="numeric-input" data-answer="3500"> m
                    </div>

                    <div class="question" data-question-id="20">
                        <div class="question-text">20. ¬øCu√°ntos trozos de 5 cm se pueden hacer con un alambre de 3 metros?</div>
                        <input type="number" class="numeric-input" data-answer="60"> trozos
                    </div>

                    <!-- PREGUNTA DE ORDENAR PASOS -->
                    <div class="question" data-question-id="21">
                        <div class="question-text">21. Ordena los pasos para <strong>comparar</strong> correctamente las longitudes "2 km" y "1.500 m". (3 Puntos)</div>
                        <div class="drop-zone" data-answer="1. Convertir todo a la misma unidad (ej: metros). 2. Comparar los n√∫meros obtenidos. 3. Indicar cu√°l es mayor o si son iguales."></div>
                        <div class="word-bank">
                            <div class="word" draggable="true">2. Comparar los n√∫meros obtenidos.</div>
                            <div class="word" draggable="true">3. Indicar cu√°l es mayor o si son iguales.</div>
                            <div class="word" draggable="true">1. Convertir todo a la misma unidad (ej: metros).</div>
                        </div>
                    </div>

                    <!-- PREGUNTA DE ARRASTRAR Y SOLTAR EN TEXTO (CLOZE) -->
                    <div class="question" data-question-id="22">
                        <div class="question-text">22. Completa el texto arrastrando la unidad de medida m√°s adecuada para cada caso. (3 Puntos)</div>
                        <div class="word-bank">
                            <div class="word" draggable="true">kil√≥metros</div>
                            <div class="word" draggable="true">cent√≠metros</div>
                            <div class="word" draggable="true">mil√≠metros</div>
                        </div>
                        <div class="cloze-text">
                            La distancia entre dos ciudades üèôÔ∏è se mide en <span class="drop-zone-inline" data-answer="kil√≥metros"></span>. 
                            La longitud de un l√°piz ‚úèÔ∏è se suele medir en <span class="drop-zone-inline" data-answer="cent√≠metros"></span>. 
                            El grosor de una moneda ü™ô se mide en <span class="drop-zone-inline" data-answer="mil√≠metros"></span>.
                        </div>
                    </div>

                    <!-- M√ÅS PREGUNTAS VARIADAS -->
                    <div class="question" data-question-id="23">
                        <div class="question-text">23. ¬øCu√°l de estas longitudes es la <strong>mayor</strong>?</div>
                        <div class="options" data-correct="üìè 2 km">
                            <div class="option">üìè 2.000 cm</div>
                            <div class="option">üìè 20 m</div>
                            <div class="option">üìè 2 km</div>
                            <div class="option">üìè 20.000 mm</div>
                        </div>
                    </div>

                    <div class="question" data-question-id="24">
                        <div class="question-text">24. Si doy 10 vueltas a una pista de 400 metros, ¬øcu√°ntos <strong>kil√≥metros</strong> he recorrido?</div>
                        <div class="options" data-correct="üèÉ 4 km">
                            <div class="option">üèÉ 40 km</div>
                            <div class="option">üèÉ 4 km</div>
                            <div class="option">üèÉ 400 km</div>
                            <div class="option">üèÉ 0.4 km</div>
                        </div>
                    </div>

                    <div class="question" data-question-id="25">
                        <div class="question-text">25. Expresa 4.810 m en forma compleja (km y m).</div>
                        <div class="options" data-correct="‚õ∞Ô∏è 4 km y 810 m">
                            <div class="option">‚õ∞Ô∏è 48 km y 10 m</div>
                            <div class="option">‚õ∞Ô∏è 4 km y 81 m</div>
                            <div class="option">‚õ∞Ô∏è 481 km y 0 m</div>
                            <div class="option">‚õ∞Ô∏è 4 km y 810 m</div>
                        </div>
                    </div>
                    
                    <div class="question" data-question-id="26">
                        <div class="question-text">26. ¬øCu√°ntos dec√≠metros le faltan a 80 cm para medir 1 metro?</div>
                        <div class="options" data-correct="üìê 2 dm">
                            <div class="option">üìê 1 dm</div>
                            <div class="option">üìê 2 dm</div>
                            <div class="option">üìê 20 dm</div>
                            <div class="option">üìê 8 dm</div>
                        </div>
                    </div>

                    <div class="question" data-question-id="27">
                        <div class="question-text">27. <strong>Verdadero o Falso:</strong> 6 km 7 hm 2 m es lo mismo que 6.702 m.</div>
                        <div class="options" data-correct="üëç Verdadero">
                            <div class="option">üëç Verdadero</div>
                            <div class="option">üëé Falso</div>
                        </div>
                    </div>

                    <div class="question" data-question-id="28">
                        <div class="question-text">28. ¬øCu√°l es el resultado de 5 m 8 cm + 7 m 7 cm?</div>
                        <div class="options" data-correct="‚ûï 12 m y 15 cm">
                            <div class="option">‚ûï 12 m y 15 cm</div>
                            <div class="option">‚ûï 12 m y 58 cm</div>
                            <div class="option">‚ûï 13 m y 5 cm</div>
                            <div class="option">‚ûï 1.215 m</div>
                        </div>
                    </div>

                    <div class="question" data-question-id="29">
                        <div class="question-text">29. Un coche recorre 32 km. ¬øCu√°ntos metros son la <strong>mitad</strong> de esa distancia?</div>
                        <input type="number" class="numeric-input" data-answer="16000"> m
                    </div>

                    <div class="question" data-question-id="30">
                        <div class="question-text">30. Si una tirolina mide 4 Dam, ¬øcu√°ntos <strong>metros</strong> se recorren al usarla 3 veces?</div>
                        <input type="number" class="numeric-input" data-answer="120"> m
                    </div>
                    
                    <div class="question" data-question-id="31">
                        <div class="question-text">31. ¬øCu√°l es el resultado de 4 km 600 m - 2 km 800 m?</div>
                        <div class="options" data-correct="‚ûñ 1 km y 800 m">
                            <div class="option">‚ûñ 2 km y 200 m</div>
                            <div class="option">‚ûñ 1 km y 800 m</div>
                            <div class="option">‚ûñ 2 km y 800 m</div>
                            <div class="option">‚ûñ 1.200 m</div>
                        </div>
                    </div>

                    <div class="question" data-question-id="32">
                        <div class="question-text">32. ¬øQu√© es m√°s largo, 1 m 5 dm √≥ 132 cm?</div>
                        <div class="options" data-correct="üìè 1 m 5 dm">
                            <div class="option">üìè 1 m 5 dm</div>
                            <div class="option">üìè 132 cm</div>
                            <div class="option">üìè Miden lo mismo</div>
                        </div>
                    </div>

                    <div class="question" data-question-id="33">
                        <div class="question-text">33. <strong>Verdadero o Falso:</strong> 1 km es igual a 100 dam.</div>
                        <div class="options" data-correct="üëç Verdadero">
                            <div class="option">üëç Verdadero</div>
                            <div class="option">üëé Falso</div>
                        </div>
                    </div>

                    <div class="question" data-question-id="34">
                        <div class="question-text">34. Un lado de un cuadrado mide 8 m y 75 cm. ¬øCu√°ntos <strong>metros</strong> mide su per√≠metro (la suma de sus 4 lados)?</div>
                        <input type="number" class="numeric-input" data-answer="35"> m
                    </div>

                    <div class="question" data-question-id="35">
                        <div class="question-text">35. ¬øCu√°l de estas unidades NO pertenece a las medidas de longitud?</div>
                        <div class="options" data-correct="‚ùå El gramo">
                            <div class="option">‚ùå El metro</div>
                            <div class="option">‚ùå El kil√≥metro</div>
                            <div class="option">‚ùå El gramo</div>
                            <div class="option">‚ùå El mil√≠metro</div>
                        </div>
                    </div>
                    
                    <div class="question" data-question-id="36">
                        <div class="question-text">36. Pasa 54 dm y 6 cm a <strong>mil√≠metros</strong>.</div>
                        <div class="options" data-correct="‚û°Ô∏è 5460 mm">
                            <div class="option">‚û°Ô∏è 546 mm</div>
                            <div class="option">‚û°Ô∏è 600 mm</div>
                            <div class="option">‚û°Ô∏è 5460 mm</div>
                            <div class="option">‚û°Ô∏è 5406 mm</div>
                        </div>
                    </div>

                    <div class="question" data-question-id="37">
                        <div class="question-text">37. Fernando mide 1 m y 46 cm. Carlos mide 162 cm. ¬øCu√°l es la diferencia de altura en <strong>cent√≠metros</strong>?</div>
                        <input type="number" class="numeric-input" data-answer="16"> cm
                    </div>
                    
                    <div class="question" data-question-id="38">
                        <div class="question-text">38. <strong>Verdadero o Falso:</strong> 800 cm es igual a 80 m.</div>
                        <div class="options" data-correct="üëé Falso">
                            <div class="option">üëç Verdadero</div>
                            <div class="option">üëé Falso</div>
                        </div>
                    </div>

                    <div class="question" data-question-id="39">
                        <div class="question-text">39. ¬øCu√°ntos <strong>metros</strong> son 2 kil√≥metros y medio?</div>
                        <input type="number" class="numeric-input" data-answer="2500"> m
                    </div>

                    <div class="question" data-question-id="40">
                        <div class="question-text">40. Si de un rollo de 12 metros corto cintas de 3 dec√≠metros, ¬øcu√°ntas cintas puedo hacer?</div>
                        <input type="number" class="numeric-input" data-answer="40"> cintas
                    </div>


                </form>
                <button type="submit" form="quiz-form" class="submit-btn">¬°Terminar y Corregir!</button>
                <div class="results" id="results-container">
                    <h2 class="results-title" id="results-title">Tus Resultados</h2>
                    <p class="score" id="score-text">Puntuaci√≥n: 0 / 40</p>
                    <p class="feedback-message" id="feedback-message">¬°Haz clic en corregir para ver tu nota!</p>
                </div>
            </div>
        </div>
    </main>
    
    <!-- El footer ahora est√° fuera del main, al final del body -->
    <footer class="main-footer">
        <a href="index.html">üîô Volver al men√∫ de materias</a>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const form = document.getElementById('quiz-form');
            const resultsContainer = document.getElementById('results-container');
            const scoreText = document.getElementById('score-text');
            const feedbackMessage = document.getElementById('feedback-message');
            const submitBtn = document.querySelector('.submit-btn');
            
            // He corregido el total de puntos para que coincida con la puntuaci√≥n asignada
            const TOTAL_POINTS = 50; 

            // --- L√≥gica para preguntas de opci√≥n ---
            const optionQuestions = document.querySelectorAll('.options');
            optionQuestions.forEach(optionsContainer => {
                const options = optionsContainer.querySelectorAll('.option');
                options.forEach(option => {
                    option.addEventListener('click', () => {
                        if (submitBtn.disabled) return; // No permitir cambios despu√©s de corregir
                        // Deseleccionar la opci√≥n hermana que estuviera seleccionada
                        options.forEach(opt => opt.classList.remove('selected'));
                        option.classList.add('selected');
                    });
                });
            });

            // --- L√≥gica para Arrastrar y Soltar (Drag and Drop) ---
            let draggedItem = null;

            document.querySelectorAll('.word[draggable="true"]').forEach(item => {
                item.addEventListener('dragstart', (e) => {
                    if (submitBtn.disabled) return;
                    draggedItem = e.target;
                    setTimeout(() => e.target.style.opacity = '0.5', 0);
                });

                item.addEventListener('dragend', (e) => {
                    setTimeout(() => {
                        e.target.style.opacity = '1';
                        draggedItem = null;
                    }, 0);
                });
            });
            
            // Permitir devolver las palabras al banco
            document.querySelectorAll('.word-bank').forEach(bank => {
                bank.addEventListener('dragover', (e) => e.preventDefault());
                bank.addEventListener('drop', (e) => {
                    e.preventDefault();
                    if (draggedItem && !bank.contains(draggedItem)) {
                         bank.appendChild(draggedItem);
                    }
                });
            });

            document.querySelectorAll('.drop-zone, .drop-zone-inline').forEach(zone => {
                zone.addEventListener('dragover', (e) => {
                    if (submitBtn.disabled) return;
                    e.preventDefault();
                    zone.classList.add('over');
                });

                zone.addEventListener('dragleave', (e) => {
                    zone.classList.remove('over');
                });

                zone.addEventListener('drop', (e) => {
                    if (submitBtn.disabled) return;
                    e.preventDefault();
                    zone.classList.remove('over');
                    if (draggedItem) {
                        // Para zonas de una sola palabra, reemplazar la existente
                        if (zone.classList.contains('drop-zone-inline') && zone.children.length > 0) {
                            const wordBank = zone.closest('.question').querySelector('.word-bank');
                            wordBank.appendChild(zone.children[0]);
                        }
                        zone.appendChild(draggedItem);
                    }
                });
            });
            
            // --- L√≥gica para Emparejar Columnas ---
            document.querySelectorAll('.matching-question').forEach(question => {
                let selectedItem = null;

                question.querySelectorAll('.match-item').forEach(item => {
                    item.addEventListener('click', () => {
                        if (submitBtn.disabled || item.classList.contains('paired')) return;

                        if (!selectedItem) {
                            // Primer clic
                            if (item.parentElement.id.startsWith('column-b-')) return; // Solo se puede empezar por la columna A
                            selectedItem = item;
                            item.classList.add('selected');
                        } else {
                            // Segundo clic
                            if (item.parentElement === selectedItem.parentElement) {
                                // Clic en la misma columna, cambia la selecci√≥n
                                selectedItem.classList.remove('selected');
                                selectedItem = item;
                                item.classList.add('selected');
                            } else {
                                // Clic en la otra columna, se forma el par
                                const pairId = `pair-${selectedItem.dataset.matchId}`;
                                selectedItem.dataset.pair = pairId;
                                item.dataset.pair = pairId;
                                
                                selectedItem.classList.remove('selected');
                                selectedItem.classList.add('paired');
                                item.classList.add('paired');
                                
                                selectedItem = null;
                            }
                        }
                    });
                });
            });


            // --- Funci√≥n principal de correcci√≥n ---
            form.addEventListener('submit', (e) => {
                e.preventDefault();
                let score = 0;

                // 1. Corregir preguntas de opci√≥n √∫nica y V/F (1 punto cada una)
                document.querySelectorAll('.options').forEach(q => {
                    const selected = q.querySelector('.option.selected');
                    const correctAnswerText = q.dataset.correct.trim();
                    
                    // Marcar la respuesta correcta aunque no se haya seleccionado
                    q.querySelectorAll('.option').forEach(opt => {
                        if(opt.textContent.trim() === correctAnswerText) {
                            opt.classList.add('correct');
                        }
                    });

                    if (selected) {
                        const isCorrect = selected.textContent.trim() === correctAnswerText;
                        if (isCorrect) {
                            score++;
                        } else {
                            selected.classList.add('incorrect');
                        }
                    }
                });
                
                // 2. Corregir preguntas de respuesta num√©rica (1 punto cada una)
                document.querySelectorAll('.numeric-input').forEach(input => {
                    const isCorrect = input.value.trim() === input.dataset.answer;
                    if (isCorrect) {
                        score++;
                        input.classList.add('correct');
                    } else {
                        input.classList.add('incorrect');
                    }
                    input.disabled = true;
                });

                // 3. Corregir pregunta de ordenar pasos (3 puntos si es perfecta)
                document.querySelectorAll('.question[data-question-id="21"]').forEach(q => {
                    const dropZone = q.querySelector('.drop-zone');
                    const words = Array.from(dropZone.querySelectorAll('.word')).map(w => w.textContent.trim());
                    const isCorrect = words.join(' ') === dropZone.dataset.answer;
                    if(isCorrect) score += 3;
                    dropZone.classList.add(isCorrect ? 'correct' : 'incorrect');
                });

                // 4. Corregir pregunta de clasificar (1 punto por cada acierto, total 6)
                document.querySelectorAll('.question[data-question-id="12"]').forEach(q => {
                    q.querySelectorAll('.drop-zone').forEach(zone => {
                        const acceptedType = zone.dataset.accept;
                        zone.querySelectorAll('.word').forEach(word => {
                            if(word.dataset.type === acceptedType) {
                                score++;
                                word.classList.add('correct');
                            } else {
                                word.classList.add('incorrect');
                            }
                        });
                    });
                });

                // 5. Corregir pregunta de emparejar (1 punto por cada par correcto, total 5)
                document.querySelectorAll('.matching-question').forEach(q => {
                    const itemsA = q.querySelectorAll('#column-a-11 .match-item');
                    itemsA.forEach(itemA => {
                        if(itemA.dataset.pair) {
                            const pairedItemB = q.querySelector(`.match-item[data-pair="${itemA.dataset.pair}"]:not([data-match-id="${itemA.dataset.matchId}"])`);
                            if(pairedItemB && itemA.dataset.matchId === pairedItemB.dataset.matchId) {
                                score++;
                                itemA.classList.add('correct');
                                pairedItemB.classList.add('correct');
                            } else if (pairedItemB) {
                                itemA.classList.add('incorrect');
                                pairedItemB.classList.add('incorrect');
                            }
                        }
                    });
                });

                // 6. Corregir pregunta Cloze (1 punto por cada acierto, total 3)
                document.querySelectorAll('.question[data-question-id="22"]').forEach(q => {
                    q.querySelectorAll('.drop-zone-inline').forEach(zone => {
                        const word = zone.querySelector('.word');
                        if (word && word.textContent.trim() === zone.dataset.answer) {
                            score++;
                            zone.classList.add('correct');
                        } else {
                            zone.classList.add('incorrect');
                        }
                    });
                });

                // --- Mostrar resultados ---
                const finalGrade = (score / TOTAL_POINTS * 10).toFixed(2);
                scoreText.textContent = `Puntuaci√≥n: ${score} / ${TOTAL_POINTS} (Nota: ${finalGrade} / 10)`;

                let message = '';
                if (finalGrade >= 9) {
                    message = `üéâ ¬°Excelente! ¬°Eres un maestro de la longitud! ¬°Enhorabuena!`;
                } else if (finalGrade >= 7) {
                    message = `üëç ¬°Muy bien! Has hecho un gran trabajo. ¬°Sigue as√≠!`;
                } else if (finalGrade >= 5) {
                    message = `‚úÖ ¬°Aprobado! No est√° mal, pero puedes mejorar un poco m√°s.`;
                } else {
                    message = `üí© ¬°Oh, no! Necesitas repasar un poco m√°s. ¬°No te rindas, t√∫ puedes!`;
                }
                feedbackMessage.innerHTML = message;

                resultsContainer.classList.add('show');
                resultsContainer.scrollIntoView({ behavior: 'smooth' });
                
                // Deshabilitar el formulario y el bot√≥n para no corregir de nuevo
                submitBtn.disabled = true;
                submitBtn.textContent = 'Examen Corregido';
                document.querySelectorAll('.word[draggable="true"]').forEach(w => w.setAttribute('draggable', 'false'));
            });
        });
    </script>
</body>
</html>
